<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Legend Expert Tools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #00ff9d; /* Default advanced color */
            --background-color: #111;
            --text-color: #eee;
            --sidebar-bg: #222;
            --dashboard-bg: rgba(25, 25, 25, 0.6);
        }

        body {
            margin: 0;
            padding: 0 0 80px 0; /* Bottom padding for player */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
            z-index: 2;
            box-sizing: border-box;
        }

        /* --- MODIFIED: Dashboard Box Size --- */
        .dashboard-box {
            width: 100%;
            max-width: 400px; /* Smaller for mobile */
            background-color: var(--dashboard-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            padding: 20px; /* Smaller padding */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            box-sizing: border-box;
        }

        /* Search Bar */
        .search-container {
            display: flex;
            width: 100%;
            margin-bottom: 20px; /* Adjusted margin */
            border-radius: 25px;
            overflow: hidden;
            border: 1px solid #444;
        }
        .search-container input[type="text"] {
            flex-grow: 1;
            border: none;
            background-color: #333;
            color: var(--text-color);
            padding: 10px 15px; /* Adjusted padding */
            font-size: 0.9rem;
        }
        .search-container input[type="text"]:focus {
            outline: none;
            background-color: #444;
        }
        .search-container button {
            border: none;
            background-color: var(--primary-color);
            color: #111;
            padding: 0 15px; /* Adjusted padding */
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .search-container button:hover {
            background-color: #fff;
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.2rem; /* Adjusted for smaller box */
            color: #fff;
            text-shadow: 0 0 8px var(--primary-color), 0 0 15px rgba(0, 255, 157, 0.7);
            margin-top: 0;
            margin-bottom: 20px; /* Adjusted margin */
        }

        /* Hamburger Menu Icon */
        .menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
        }
        .menu-toggle span {
            display: block;
            width: 30px;
            height: 3px;
            background-color: var(--primary-color);
            margin: 6px 0;
            transition: 0.4s;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 250px;
            height: 100%;
            background-color: var(--sidebar-bg);
            padding: 80px 15px 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
            transition: left 0.3s ease-in-out;
            z-index: 1000;
            border-right: 1px solid var(--primary-color);
        }
        .sidebar.active {
            left: 0;
        }
        .sidebar h3 {
            color: var(--primary-color);
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .sidebar ul li a {
            display: block;
            padding: 12px 10px;
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.1rem;
            border-radius: 5px;
            transition: background-color 0.2s, color 0.2s;
        }
        .sidebar ul li a:hover {
            background-color: var(--primary-color);
            color: #111;
        }

        /* Color Changer */
        .color-changer {
            margin-top: 30px;
        }
        .color-changer label {
            font-size: 0.9rem;
            display: block;
            margin-bottom: 10px;
        }
        .color-changer input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            padding: 0;
            cursor: pointer;
        }
        
        /* Button Container */
        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px; /* Added margin-top */
        }
        .action-button {
            display: inline-block;
            color: #fff;
            padding: 12px 25px; /* Adjusted padding */
            font-size: 1rem; /* Adjusted font size */
            font-weight: bold;
            text-decoration: none;
            border-radius: 50px;
            transition: transform 0.2s, background-color 0.2s;
        }
        .action-button:hover {
            transform: scale(1.05);
        }
        .whatsapp-button {
            background-color: #25D366;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
        }
        .whatsapp-button:hover {
            background-color: #128C7E;
        }

        /* Disclaimer Text */
        .disclaimer-text {
            width: 100%;
            max-width: 800px;
            margin: 30px auto 0;
            font-size: 0.8rem;
            color: #999;
            line-height: 1.6;
            text-align: center;
        }

        /* Audio Player (Bottom Bar) */
        .audio-player {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--sidebar-bg);
            padding: 15px;
            z-index: 100;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
            border-top: 1px solid var(--primary-color);
            box-sizing: border-box;
        }
        .audio-player audio {
            width: 100%;
            max-width: 800px;
            display: block;
            margin: 0 auto;
            height: 40px;
        }

        /* --- NEW: Tool Specific Styles --- */
        .tool-content {
            text-align: left;
            width: 100%;
            margin-top: 20px;
        }
        .tool-content label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: var(--primary-color);
        }
        .tool-content textarea {
            width: 100%;
            height: 100px;
            background-color: #333;
            border: 1px solid #444;
            color: var(--text-color);
            padding: 10px;
            font-size: 0.95rem;
            border-radius: 8px;
            resize: vertical;
            margin-bottom: 15px;
            box-sizing: border-box;
        }
        .tool-content button {
            background-color: var(--primary-color);
            color: #111;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .tool-content button:hover {
            background-color: #fff;
        }
        .tool-result {
            margin-top: 20px;
            border-top: 1px solid #444;
            padding-top: 20px;
            text-align: center;
        }
        /* ===== MODIFICATION: Added Video styles ===== */
        .tool-result img,
        .tool-result video {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            border: 1px solid var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 255, 157, 0.5);
        }
        .tool-result p {
            font-size: 0.9rem;
            color: #ccc;
        }
        .back-to-home {
            background-color: #555;
            color: #eee;
            margin-top: 20px;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: inline-block;
            text-decoration: none;
            font-size: 0.9rem;
        }
        .back-to-home:hover {
            background-color: #777;
        }

    </style>
</head>
<body>

    <canvas id="particle-canvas"></canvas>

    <button class="menu-toggle" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <nav class="sidebar" id="sidebar">
        <h3>Demo Tools</h3>
        <ul>
            <li><a href="#text-to-video" class="tool-link" data-tool="text-to-video">Text to Video</a></li>
            <li><a href="#" class="demo-tool">Video Downloader</a></li>
            <li><a href="#" class="demo-tool">Password Generator</a></li>
        </ul>

        <div class="color-changer">
            <label for="colorPicker">Theme Color Changer</label>
            <input type="color" id="colorPicker" value="#00ff9d">
        </div>
    </nav>

    <div class="content">

        <div class="dashboard-box" id="main-dashboard">
            </div>

        <div class="disclaimer-text">
            <p><strong>For Educational Purposes Only:</strong> All tools, information, and resources provided on "Legend Expert" are strictly for educational and demonstrational purposes. The services offered are intended to showcase capabilities and should not be used for any illicit, unethical, or commercial activities. The developers assume no liability for misuse of the information or tools provided. By using this website, you acknowledge and agree to these terms.</p>
        </div>

    </div>

    <div class="audio-player">
        <audio controls autoplay loop>
            <source src="VID-20251104-WA0015.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </f>
    </div>

    <script>
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const colorPicker = document.getElementById('colorPicker');
        const mainDashboard = document.getElementById('main-dashboard');

        // --- Sidebar & Color Changer ---
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        colorPicker.addEventListener('input', (e) => {
            document.documentElement.style.setProperty('--primary-color', e.target.value);
        });

        // --- "Coming Soon" Alert Script for specific demo tools ---
        const demoTools = document.querySelectorAll('.demo-tool');
        demoTools.forEach(tool => {
            tool.addEventListener('click', (e) => {
                e.preventDefault(); 
                alert('Tool is coming soon!');
            });
        });

        // --- NEW: Dashboard Content Management ---
        const loadHomePage = () => {
            mainDashboard.innerHTML = `
                <div class="search-container">
                    <input type="text" placeholder="Search tools, features...">
                    <button type="submit">&#x1F50D;</button> 
                </div>
                <h1>Welcome to Legend Expert Tools</h1>
                <div class="button-container">
                    <a href="https://chat.whatsapp.com/CkMDtjbJCp3DZYSEy7arsp?mode=wwt" target="_blank" class="action-button whatsapp-button">
                        Join on WhatsApp
                    </a>
                </div>
            `;
        };
        
        // ===== REMOVED: Text to Image Tool Function =====
        
        
        // ===== NEW: Text to Video Tool Function =====
        const loadTextToVideoTool = () => {
            mainDashboard.innerHTML = `
                <a href="#" class="back-to-home" onclick="loadHomePage(); return false;">&larr; Back to Home</a>
                <h1>Text to Video Generator</h1>
                <div class="tool-content">
                    <label for="video-prompt">Enter your text prompt:</label>
                    <textarea id="video-prompt" placeholder="A futuristic car driving through neon-lit city streets at night."></textarea>
                    <button id="generate-video-btn">Generate Video</button>
                    <div class="tool-result" id="video-result">
                        <p>Your generated video will appear here.</p>
                    </div>
                </div>
            `;
            
            // Add event listener for the new button
            document.getElementById('generate-video-btn').addEventListener('click', async () => {
                const prompt = document.getElementById('video-prompt').value.trim();
                const output = document.getElementById('video-result');
                
                if (!prompt) {
                  alert("Pehle kuch likho toh sahi!");
                  return;
                }

                const endpoint = '/api/proxy'; // Vercel proxy
                output.innerHTML = '<p>Generating video... please wait ‚è≥</p>';
                
                try {
                  const res = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                  });
                  
                  const responseText = await res.text();
                  let data;
                  try {
                    data = JSON.parse(responseText);
                  } catch(e) {
                    throw new Error("API response was not valid JSON: " + responseText);
                  }

                  if (data.video_url || data.url) {
                    const videoSrc = data.video_url || data.url;
                    output.innerHTML = `<video controls autoplay loop src="${videoSrc}"></video>`;
                  } else {
                    output.innerHTML = `<p style='color:orange'>Error: ${JSON.stringify(data.error || data)}</p>`;
                  }
                } catch (err) {
                  console.error('API Error:', err);
                  output.innerHTML = `<p style='color:red'>Error: ${err.message}</p>`;
                }
            });
        };
        // ===== END OF NEW FUNCTION =====

        // Load home page initially
        loadHomePage();

        // Handle tool links
        document.querySelectorAll('.tool-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                sidebar.classList.remove('active'); // Close sidebar after clicking
                const tool = e.target.dataset.tool;
                
                // ===== MODIFICATION: Removed text-to-image logic =====
                if (tool === 'text-to-video') {
                    loadTextToVideoTool();
                }
                // Add more tools here if needed
            });
        });

        // --- Particle Network Background Script ---
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particlesArray;

        let mouse = {
            x: null,
            y: null,
            radius: (canvas.height / 100) * (canvas.width / 100) // Adjusted mouse interaction radius
        }

        window.addEventListener('mousemove', 
            function(event) {
                mouse.x = event.x;
                mouse.y = event.y;
            }
        );

        class Particle {
            constructor(x, y, directionX, directionY, size) {
                this.x = x;
                this.y = y;
                this.directionX = directionX;
                this.directionY = directionY;
                this.size = size;
            }

            getColor() {
                return getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = this.getColor();
                ctx.fill();
            }

            update() {
                if (this.x > canvas.width || this.x < 0) {
                    this.directionX = -this.directionX;
                }
                if (this.y > canvas.height || this.y < 0) {
                    this.directionY = -this.directionY;
                }

                this.x += this.directionX;
                this.y += this.directionY;
                this.draw();
            }
        }

        function init() {
            particlesArray = [];
            let numberOfParticles = (canvas.height * canvas.width) / 12000; // Adjusted particle density
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 1.5) + 1;
                let x = (Math.random() * ((canvas.width - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((canvas.height - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * 1.6) - 0.8; // Faster movement
                let directionY = (Math.random() * 1.6) - 0.8; // Faster movement

                particlesArray.push(new Particle(x, y, directionX, directionY, size));
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const lineColor = getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim();

            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
            connect(lineColor);
        }

        function connect(lineColor) {
            let opacityValue = 1;
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x))
                        + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                    
                    if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                        opacityValue = 1 - (distance / 20000);
                        ctx.strokeStyle = `rgba(${parseInt(lineColor.slice(1, 3), 16)}, ${parseInt(lineColor.slice(3, 5), 16)}, ${parseInt(lineColor.slice(5, 7), 16)}, ${opacityValue})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                        ctx.stroke();
                    }
                }
            }
        }

        window.addEventListener('resize', 
            function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                mouse.radius = (canvas.height / 100) * (canvas.width / 100);
                init();
            }
        );

        window.addEventListener('mouseout', 
            function() {
                mouse.x = undefined;
                mouse.y = undefined;
            }
        );

        init();
        animate();

    </script>
</body>
</html>
